Запуск решения
========
Из директории репозитория перейти в папку avoid:

```
cd avoid
```

Запустить скрипт полёта:

```
python3 main.py
```

Скрипт предназначен для полёта в симуляции, запускаемой файлом avoid_2.sh

Описание
========

Пакет предназначен для развертывания на Ubuntu 20.04 (Focal Fossa)

Рекомендуется использовать "чистую" ОС с установленными обновлениями и драйверами (install third-party software for graphics and Wi-Fi hardware and additional media formats)

Для своей работы использует:
- библиотеки и окружение [ROS Noetic](https://www.ros.org) ([Подробный учебник ROS](http://wiki.ros.org/ROS/Tutorials))
- программный пакет 3D симуляции и моделирования [AirSim](https://microsoft.github.io/AirSim/)
- код открытого автопилота [PX4](https://px4.io) версия 1.11.3


Подготовка к установке
======================

Установка Git

```
sudo apt install git
```

Скачивание репозитория

```
git clone --single-branch https://github.com/acsl-mipt/drone-games.git
```

Переход в скачанный репозиторий

```
cd drone-games/
```

Обновление локального репозитория (получение изменений из удаленного репозитория; команда выполняется из директории drone-games)

```
git pull
```


Установка
=========

Для установки всех зависимостей и компиляции (сборки) необходимых файлов выполнить в консоли (без использования sudo):

```
./install.sh
```

Во время установки может запросить пароль, поскольку скрипт использует команду sudo.

В качестве рабочего пространства для использования собственных ROS пакетов, в системе прописывается catkin_ws домашнего каталога (~/catkin_ws).

После установки необходимо перезапустить терминал для продолжения работы (закрыть и открыть новый).

Кроме того, необходимо скачать [окружение](https://drive.google.com/drive/folders/1quq_HtZ9tjnzduEUVISJS-3Q2F9FLLM0), в котором будет происходить моделирование.
После скачивания необходимо распаковать файлы в директорию airsim. Путь к окружению должен выглядеть следущим образом:

```
./airsim/ИМЯ_ОКРУЖЕНИЯ/LinuxNoEditor
```

Требуемое окружение (имя) зависит от выбранной задачи:

- [Синхронный полет](.resources/TASK_1.md) - formation
- [Командная гонка](.resources/TASK_2.md) - race
- [Распределенная картография](.resources/TASK_3.md) - afs
- [Уход от столкновения](.resources/TASK_4.md) - afs
- [Беспилотная аэродоставка грузов](.resources/TASK_5.md) - cargo

Проверка работоспособности
==========================

Проверка запуска окружения как есть:
```
AIRSIM_PKG="ИМЯ_ОКРУЖЕНИЯ" ./airsim/run.sh
```

Запуск с одним аппаратом:

```
./start.sh
```

После успешного выполнения скрипта вы должны увидеть один аппарат в одном из окружениий (скрипт выберет первое по порядку).

Запуск в выбранном окружении:

```
AIRSIM_PKG="ИМЯ_ОКРУЖЕНИЯ" ./start.sh
```

Остановка

```
./stop.sh
```

Помощь по имеющимся аргументам командной строки:

```
./start.sh --help
```

Работа с группой аппаратов
==========================

Пример с коптерами:

```
./test-group.sh
```

Тестовые задания
================

[Тестовое задание по дисциплине Синхронный полет](.resources/TASK_1.md)

[Тестовое задание по дисциплине Командная гонка](.resources/TASK_2.md)

[Тестовое задание по дисциплине Распределенная картография](.resources/TASK_3.md)

[Тестовое задание по дисциплине Уход от столкновения](.resources/TASK_4.md)

[Тестовое задание по дисциплине Беспилотная аэродоставка грузов](.resources/TASK_5.md)

Решения тестовых заданий необходимо отправлять через форму https://forms.gle/RsRcncF4uQpXgAtVA (требуется учетная запись пользователя Google).


Финальные задания
================

[Финальное задание по дисциплине Синхронный полет](.resources/TASK_1_2.md)

[Финальное задание по дисциплине Командная гонка](.resources/TASK_2_2.md)

[Финальное задание по дисциплине Уход от столкновения](.resources/TASK_4_2.md)

[FAQ](.resources/FAQ.md)
========================
